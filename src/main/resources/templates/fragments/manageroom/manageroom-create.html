<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Th√™m m·ªõi Qu·∫£n L√Ω Ph√≤ng</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

</head>
<body th:fragment="manageroom" class="bg-gray-100 p-6">
<div class="max-w-lg mx-auto mt-10 bg-white p-6 rounded shadow">
    <h1 class="text-xl font-bold mb-4 text-gray-700">‚ûï Th√™m m·ªõi qu·∫£n l√Ω ph√≤ng</h1>

    <!-- üîî Th√¥ng b√°o -->
    <div id="alertBox" class="hidden mb-4 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-500 opacity-0"></div>

    <form id="createForm" th:action="@{/dashboard/manageroom/create}" method="post" th:object="${manageRoom}" class="space-y-4">

    <div>
            <label class="block font-medium">Room ID</label>
            <input type="number" th:field="*{roomId}" class="border w-full p-2 rounded" required>
        </div>

        <div>
            <label class="block font-medium">Ng√†y b·∫Øt ƒë·∫ßu</label>
            <input type="date" th:field="*{startDate}" class="border w-full p-2 rounded" required>
        </div>

        <div>
            <label class="block font-medium">Ng√†y k·∫øt th√∫c</label>
            <input type="date" th:field="*{endDate}" class="border w-full p-2 rounded" required>
        </div>

        <div>
            <label class="block font-medium">Ghi ch√∫</label>
            <textarea th:field="*{note}" class="border w-full p-2 rounded"></textarea>
        </div>
        <div>
            <label class="block font-medium">Tr·∫°ng th√°i</label>
            <select th:field="*{status}" class="border w-full p-2 rounded">
                <option value="MAINTAINCE">MAINTAINCE</option>
                <option value="CLEANING">CLEANING</option>
            </select>
        </div>


        <div class="flex justify-between">
            <a th:href="@{/dashboard/manageroom}" class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500">
                ‚Üê Quay l·∫°i
            </a>
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                üíæ L∆∞u
            </button>
        </div>
    </form>
</div>
<!-- üîß Script ki·ªÉm tra v√† hi·ªÉn th·ªã alert -->
<script>
    const form = document.getElementById("createForm");
    const alertBox = document.getElementById("alertBox");

    form.addEventListener("submit", function (event) {
        const start = new Date(document.getElementById("startDate").value);
        const end = new Date(document.getElementById("endDate").value);

        alertBox.classList.add("hidden");
        alertBox.classList.remove("opacity-100");

        if (end < start) {
            event.preventDefault();
            showAlert("‚ö†Ô∏è Ng√†y k·∫øt th√∫c ph·∫£i sau ho·∫∑c b·∫±ng ng√†y b·∫Øt ƒë·∫ßu!", "error");
            return false;
        }
        showAlert("‚è≥ ƒêang l∆∞u d·ªØ li·ªáu...", "info");
    });

    function showAlert(message, type) {
        alertBox.textContent = message;
        alertBox.classList.remove("hidden");
        alertBox.classList.remove("opacity-0");
        alertBox.classList.add("opacity-100", "transition-all", "duration-500");

        alertBox.className = "mb-4 px-4 py-3 rounded-lg text-sm font-medium text-center transition-all duration-500";

        if (type === "error") {
            alertBox.classList.add("bg-red-100", "border", "border-red-400", "text-red-700");
        } else if (type === "success") {
            alertBox.classList.add("bg-green-100", "border", "border-green-400", "text-green-700");
        } else {
            alertBox.classList.add("bg-blue-100", "border", "border-blue-400", "text-blue-700");
        }
        // ·∫®n alert sau 4 gi√¢y
        setTimeout(() => {
            alertBox.classList.add("opacity-0");
            setTimeout(() => alertBox.classList.add("hidden"), 500);
        }, 4000);
    }
</script>
</body>
</html>
