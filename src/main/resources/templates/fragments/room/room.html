<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Room Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script>
        async function deleteRoom(room_id) {
            if (!confirm("Bạn có chắc muốn xóa phòng này?")) return;
            const response = await fetch('/api/room/' + room_id, { method: 'DELETE' });
            if (response.ok) {
                location.reload();
            } else {
                alert("Xóa phòng thất bại");
            }
        }
    </script>
</head>

<body th:fragment="room" class="bg-gray-100 p-6">

    <h1 class="text-2xl font-bold mb-6">Room Dashboard</h1>

    <!-- Nút thêm phòng -->
    <div class="mb-4">
        <a href="/room/add" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">+ Thêm phòng</a>
    </div>

    <!-- Header Grid -->
    <div class="grid grid-cols-8 bg-gray-200 font-semibold text-left rounded-t-lg">
        <div class="py-2 px-4">ID</div>
        <div class="py-2 px-4">Tên phòng</div>
        <div class="py-2 px-4">Loại</div>
        <div class="py-2 px-4">Giá</div>
        <div class="py-2 px-4">Mô tả</div>
        <div class="py-2 px-4">Ảnh</div>
        <div class="py-2 px-4">Trạng thái</div>
        <div class="py-2 px-4">Hành động</div>
    </div>

    <!-- Data Grid -->
    <div th:each="r : ${rooms}" class="grid grid-cols-8 bg-white border-b items-center">
        <div class="py-2 px-4" th:text="${r.roomId}"></div>
        <div class="py-2 px-4" th:text="${r.roomName}"></div>
        <div class="py-2 px-4" th:text="${r.type}"></div>
        <div class="py-2 px-4" th:text="${#numbers.formatDecimal(r.price, 1, 'COMMA', 2, 'POINT')}"></div>
        <div class="py-2 px-4 truncate max-w-[120px] " th:text="${r.description}"></div>
        <div class="py-2 px-4">
            <img th:src="${r.img}" alt="Room Image" class="w-20 h-16 object-cover rounded">
        </div>
        <div class="py-2 px-4">
            <span th:if="${r.status == 'available'}" class="text-green-600 font-semibold">Available</span>
            <span th:if="${r.status == 'deleted'}" class="text-red-600 font-semibold">Deleted</span>
        </div>
        <div class="py-2 px-4 space-x-2">
            <a th:href="@{/room/edit/{id}(id=${r.roomId})}"
                class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded">Sửa</a>
        </div>
    </div>

</body>

</html>