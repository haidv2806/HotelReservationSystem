<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Danh sách phòng</title>
</head>

<body th:fragment="cards" class="bg-sky-900 p-6">

<div id="cards" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">

    <div th:each="r : ${rooms}" class="bg-white rounded-2xl shadow-lg hover:shadow-2xl transition overflow-hidden">
        <a th:href="@{/detail/{roomId}(roomId=${r.roomId})}" class="block">
            <!-- Ảnh -->
            <div class="w-full h-48 overflow-hidden rounded-t-2xl">
                <img th:src="${r.img}" class="w-full h-full object-cover transition-transform duration-300 hover:scale-110"/>
            </div>

            <!-- Nội dung -->
            <div class="p-5 space-y-2">
                <!-- Badge Loại phòng -->
                <span class="inline-block bg-cyan-500 text-white text-xs font-bold px-3 py-1 rounded-full"
                      th:text="${r.type}">Loại</span>

                <!-- Tên phòng -->
                <h3 class="text-xl font-bold text-gray-900 line-clamp-2" th:text="${r.roomName}">Tên phòng</h3>

                <!-- Mô tả vắn tắt -->
                <p class="text-gray-600 text-sm line-clamp-3"
                   th:text="${#strings.replace(r.description, '<p>', '')}">Mô tả phòng...</p>

                <!-- Giá -->
                <div class="mt-3 flex items-center justify-between">
                    <span class="text-gray-500 text-sm">1 đêm</span>
                    <span class="text-red-600 text-lg font-bold"
                          th:text="${#numbers.formatInteger(r.price, 3, 'POINT')} + ' VND'">0 VND</span>
                </div>
            </div>
        </a>
    </div>

</div>

<!-- Phân trang -->
<div class="flex justify-center mt-8 space-x-3">
    <a th:if="${currentPage > 0}"
       th:href="@{/searchRoom(roomType=${roomType}, checkInDate=${checkInDate}, checkOutDate=${checkOutDate}, minPrice=${minPrice}, maxPrice=${maxPrice}, page=${currentPage - 1}, size=10)} + '#cards'"
       class="px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition">← Previous</a>

    <span class="px-4 py-2 bg-white border rounded-lg text-gray-700">
            Page <span th:text="${currentPage + 1}"></span> / <span th:text="${totalPages}"></span>
        </span>

    <a th:if="${currentPage < totalPages - 1}"
       th:href="@{/searchRoom(roomType=${roomType}, checkInDate=${checkInDate}, checkOutDate=${checkOutDate}, minPrice=${minPrice}, maxPrice=${maxPrice}, page=${currentPage + 1}, size=10)} + '#cards'"
       class="px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition">Next →</a>
</div>

</body>

</html>
